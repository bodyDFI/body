<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <style>
    text {
      font-family: Arial, sans-serif;
    }
    .title {
      font-size: 24px;
      font-weight: bold;
    }
    .subtitle {
      font-size: 18px;
      font-weight: bold;
    }
    .component-title {
      font-size: 14px;
      font-weight: bold;
    }
    .component-text {
      font-size: 12px;
    }
    .container {
      fill: #f9f9f9;
      stroke: #999;
      stroke-width: 2;
    }
    .hardware {
      fill: #e3f6ff;
      stroke: #00afef;
      stroke-width: 2;
    }
    .mobile {
      fill: #e6fff3;
      stroke: #39b37a;
      stroke-width: 2;
    }
    .backend {
      fill: #fff1e6;
      stroke: #ff9566;
      stroke-width: 2;
    }
    .blockchain {
      fill: #fff8e6;
      stroke: #f5ba36;
      stroke-width: 2;
    }
    .component {
      fill: white;
      stroke: #ccc;
      stroke-width: 1;
    }
    .arrow {
      stroke: #666;
      stroke-width: 1.5;
      fill: none;
      marker-end: url(#arrowhead);
    }
    .data-flow {
      stroke: #00afef;
      stroke-width: 1.5;
      stroke-dasharray: 4, 2;
      fill: none;
      marker-end: url(#arrowhead-blue);
    }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00afef" />
    </marker>
  </defs>
  
  <rect width="100%" height="100%" fill="white" />
  
  <text x="400" y="40" text-anchor="middle" class="title">bodyDFI System Architecture</text>
  
  <!-- Main Application Container -->
  <rect x="50" y="70" width="700" height="480" rx="10" class="container" />
  
  <!-- Hardware Layer -->
  <rect x="80" y="100" width="200" height="150" rx="8" class="hardware" />
  <text x="180" y="120" text-anchor="middle" class="subtitle">Hardware</text>
  
  <rect x="100" y="130" width="160" height="35" rx="5" class="component" />
  <text x="110" y="145" class="component-title">bodyDFI Sensors</text>
  <text x="110" y="158" class="component-text">MPU-6050, ESP32</text>
  
  <rect x="100" y="175" width="75" height="60" rx="5" class="component" />
  <text x="137" y="195" text-anchor="middle" class="component-title">Firmware</text>
  <text x="137" y="210" text-anchor="middle" class="component-text">C/C++</text>
  <text x="137" y="225" text-anchor="middle" class="component-text">ESP-IDF</text>
  
  <rect x="185" y="175" width="75" height="60" rx="5" class="component" />
  <text x="222" y="195" text-anchor="middle" class="component-title">Connectivity</text>
  <text x="222" y="210" text-anchor="middle" class="component-text">BLE</text>
  <text x="222" y="225" text-anchor="middle" class="component-text">GATT Services</text>
  
  <!-- Mobile Layer -->
  <rect x="80" y="280" width="200" height="150" rx="8" class="mobile" />
  <text x="180" y="300" text-anchor="middle" class="subtitle">Mobile</text>
  
  <rect x="100" y="310" width="160" height="35" rx="5" class="component" />
  <text x="110" y="325" class="component-title">React Native App</text>
  <text x="110" y="338" class="component-text">iOS / Android</text>
  
  <rect x="100" y="355" width="75" height="60" rx="5" class="component" />
  <text x="137" y="375" text-anchor="middle" class="component-title">Device</text>
  <text x="137" y="390" text-anchor="middle" class="component-text">BLE Manager</text>
  <text x="137" y="405" text-anchor="middle" class="component-text">Local Storage</text>
  
  <rect x="185" y="355" width="75" height="60" rx="5" class="component" />
  <text x="222" y="375" text-anchor="middle" class="component-title">User</text>
  <text x="222" y="390" text-anchor="middle" class="component-text">Auth</text>
  <text x="222" y="405" text-anchor="middle" class="component-text">Wallet</text>
  
  <!-- Backend Layer -->
  <rect x="310" y="100" width="200" height="330" rx="8" class="backend" />
  <text x="410" y="120" text-anchor="middle" class="subtitle">Backend</text>
  
  <rect x="330" y="130" width="160" height="35" rx="5" class="component" />
  <text x="340" y="145" class="component-title">Express Services</text>
  <text x="340" y="158" class="component-text">Node.js</text>
  
  <rect x="330" y="175" width="75" height="60" rx="5" class="component" />
  <text x="367" y="195" text-anchor="middle" class="component-title">API</text>
  <text x="367" y="210" text-anchor="middle" class="component-text">REST</text>
  <text x="367" y="225" text-anchor="middle" class="component-text">Authentication</text>
  
  <rect x="415" y="175" width="75" height="60" rx="5" class="component" />
  <text x="452" y="195" text-anchor="middle" class="component-title">Data</text>
  <text x="452" y="210" text-anchor="middle" class="component-text">Processing</text>
  <text x="452" y="225" text-anchor="middle" class="component-text">Analytics</text>
  
  <rect x="330" y="245" width="75" height="60" rx="5" class="component" />
  <text x="367" y="265" text-anchor="middle" class="component-title">Storage</text>
  <text x="367" y="280" text-anchor="middle" class="component-text">MongoDB</text>
  <text x="367" y="295" text-anchor="middle" class="component-text">Redis Cache</text>
  
  <rect x="415" y="245" width="75" height="60" rx="5" class="component" />
  <text x="452" y="265" text-anchor="middle" class="component-title">Real-time</text>
  <text x="452" y="280" text-anchor="middle" class="component-text">Socket.IO</text>
  <text x="452" y="295" text-anchor="middle" class="component-text">Notifications</text>
  
  <rect x="330" y="315" width="160" height="35" rx="5" class="component" />
  <text x="340" y="330" class="component-title">User Management</text>
  <text x="340" y="343" class="component-text">Auth, Permissions, Privacy</text>
  
  <rect x="330" y="360" width="160" height="35" rx="5" class="component" />
  <text x="340" y="375" class="component-title">Sensor Data Management</text>
  <text x="340" y="388" class="component-text">Collection, Validation, Storage</text>
  
  <!-- Blockchain Layer -->
  <rect x="540" y="100" width="200" height="330" rx="8" class="blockchain" />
  <text x="640" y="120" text-anchor="middle" class="subtitle">Blockchain</text>
  
  <rect x="560" y="130" width="160" height="35" rx="5" class="component" />
  <text x="570" y="145" class="component-title">Solana Programs</text>
  <text x="570" y="158" class="component-text">Rust / Anchor</text>
  
  <rect x="560" y="175" width="75" height="60" rx="5" class="component" />
  <text x="597" y="195" text-anchor="middle" class="component-title">Token</text>
  <text x="597" y="210" text-anchor="middle" class="component-text">SPL Token</text>
  <text x="597" y="225" text-anchor="middle" class="component-text">Rewards</text>
  
  <rect x="645" y="175" width="75" height="60" rx="5" class="component" />
  <text x="682" y="195" text-anchor="middle" class="component-title">Verification</text>
  <text x="682" y="210" text-anchor="middle" class="component-text">Data Hash</text>
  <text x="682" y="225" text-anchor="middle" class="component-text">Proofs</text>
  
  <rect x="560" y="245" width="160" height="35" rx="5" class="component" />
  <text x="570" y="260" class="component-title">Data Marketplace</text>
  <text x="570" y="273" class="component-text">Listings, Access Control</text>
  
  <rect x="560" y="290" width="75" height="60" rx="5" class="component" />
  <text x="597" y="310" text-anchor="middle" class="component-title">Wallets</text>
  <text x="597" y="325" text-anchor="middle" class="component-text">Phantom</text>
  <text x="597" y="340" text-anchor="middle" class="component-text">Solflare</text>
  
  <rect x="645" y="290" width="75" height="60" rx="5" class="component" />
  <text x="682" y="310" text-anchor="middle" class="component-title">Governance</text>
  <text x="682" y="325" text-anchor="middle" class="component-text">Staking</text>
  <text x="682" y="340" text-anchor="middle" class="component-text">Voting</text>
  
  <rect x="560" y="360" width="160" height="35" rx="5" class="component" />
  <text x="570" y="375" class="component-title">JavaScript Client</text>
  <text x="570" y="388" class="component-text">@solana/web3.js</text>
  
  <!-- Connection Arrows -->
  <!-- Hardware to Mobile -->
  <path d="M 180 250 L 180 280" class="arrow" />
  
  <!-- Mobile to Backend -->
  <path d="M 280 340 L 310 340" class="arrow" />
  
  <!-- Backend to Blockchain -->
  <path d="M 510 340 L 540 340" class="arrow" />
  
  <!-- Bidirectional Mobile to Backend -->
  <path d="M 260 310 C 285 310, 285 320, 310 320" class="arrow" />
  <path d="M 310 330 C 285 330, 285 340, 260 340" class="arrow" />
  
  <!-- Bidirectional Backend to Blockchain -->
  <path d="M 490 310 C 515 310, 515 320, 540 320" class="arrow" />
  <path d="M 540 330 C 515 330, 515 340, 490 340" class="arrow" />
  
  <!-- Data Flow -->
  <path d="M 222 225 C 250 240, 280 260, 300 280 C 320 300, 330 320, 330 340" class="data-flow" />
  <text x="280" y="260" class="component-text">Data</text>
  
  <path d="M 452 225 C 470 230, 500 240, 520 260 C 540 280, 550 300, 560 320" class="data-flow" />
  <text x="520" y="260" class="component-text">Verification</text>
  
  <path d="M 645 245 C 620 220, 590 200, 570 190 C 550 180, 520 170, 490 175" class="data-flow" />
  <text x="580" y="200" class="component-text">Rewards</text>
  
  <!-- Legend -->
  <rect x="180" y="450" width="440" height="70" rx="5" fill="#f9f9f9" stroke="#999" />
  <text x="290" y="470" class="component-title">Primary Data Flow:</text>
  <text x="290" y="490" class="component-text">1. Sensor → Mobile App → Backend → Storage</text>
  <text x="290" y="510" class="component-text">2. Backend → Blockchain (verification) → Token rewards</text>
  <text x="570" y="470" class="component-title">Security:</text>
  <text x="570" y="490" class="component-text">- End-to-end encryption</text>
  <text x="570" y="510" class="component-text">- Blockchain verification</text>
</svg> 